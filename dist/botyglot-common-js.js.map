{"version":3,"file":"botyglot-common-js.js","sources":["../src/lib-components/errors_placeholder.vue","../src/lib-components/component_wrapper.vue","../src/lib-components/autocomplete.vue","../src/lib-components/check_box.vue","../src/lib-components/date.vue","../node_modules/flatpickr/dist/plugins/confirmDate/confirmDate.js","../src/lib-components/datetime.vue","../src/lib-components/field.vue","../src/lib-components/form.vue","../src/lib-components/hidden.vue","../src/lib-components/monaco_editor.vue","../src/lib-components/quill_editor.vue","../src/lib-components/select.vue","../src/lib-components/submit.vue","../src/lib-components/textarea.vue","../src/lib-components/label.vue","../src/lib-components/toggle_switch.vue","../src/lib-components/tel_input.vue","../src/lib-components/time.vue","../src/lib-components/multi_check.vue","../src/lib-components/suggested_value.vue","../src/lib-components/form_store.js","../src/entry.js"],"sourcesContent":["<template>\n  <span v-if=\"displayValidationMessage\" :class=\"inputClass\"> {{ inputMessage }}  </span>\n</template>\n\n\n<script setup>\nimport { computed, toRefs } from 'vue';\nimport { useStore } from \"vuex\";\nconst props = defineProps({\n  names: { // do not use directly (instead use the computed property computed_names)\n    type: [String, Array],\n    required: true\n  },\n  id: {\n    type: String,\n  },\n  force: {\n    type: [String, Boolean],\n    default: false,\n    require: false\n  }\n})\nconst store = useStore();\nconst { names, force } = toRefs(props);\nconst computed_names = computed(() => {\n  if (typeof names.value === 'string') {\n    return JSON.parse(names.value);\n  } else {\n    return names.value;\n  }\n});\nconst inputTouched = computed({\n  get () {\n    if (force === true || force === \"true\") return true;\n\n    let result = null;\n    computed_names.value.forEach(name => {\n      let touched = store.getters.getTouched(name);\n      if (touched && touched !== null && touched !== false) {\n        result = touched;\n      }\n    });\n    return result;\n  },\n  set (value) {\n    computed_names.value.forEach(name => {\n      store.commit('setTouched', {\n        value: value,\n        name: name\n      });\n    });\n  }\n});\nconst inputError = computed(() => {\n  if (inputTouched.value) {\n    let result = \"\";\n    computed_names.value.forEach(name => {\n      let error = store.getters.getError(name);\n      if (error && error !== \"\" && result === \"\") {\n        result = error;\n      }\n    });\n    return result;\n  } else {\n    return null;\n  }\n});\nconst inputWarning = computed(() => {\n  if (inputTouched.value) {\n    let result = \"\";\n    computed_names.value.forEach(name => {\n      let warning = store.getters.getWarning(name);\n      if (warning && warning !== \"\" && result === \"\") {\n        result = warning;\n      }\n    });\n    return result;\n  } else {\n    return null;\n  }\n});\nconst displayValidationError = computed(() => inputTouched.value && inputError.value);\n\nconst displayValidationWarning = computed(() => inputTouched.value && !inputError.value && inputWarning.value);\n\nconst displayValidationMessage = computed(() => displayValidationError.value || displayValidationWarning.value);\n\nconst inputClass = computed(() => ({\n  \"input-block__error-feedback\": displayValidationError.value,\n  \"input-block__warning-feedback\": displayValidationWarning.value\n}));\n\nconst inputMessage = computed(() => inputError.value || inputWarning.value);\n</script>\n","<template>\n  <div :class=\"[inputGroupClass, classes]\" :id=\"id + '__wrapper'\">\n    <slot></slot>\n  </div>\n</template>\n\n<script setup>\nimport { computed } from 'vue';\nimport { useStore } from \"vuex\";\nconst store = useStore();\nconst props = defineProps({\n  name: {\n    type: String,\n    required: true\n  },\n  id: {\n    type: String,\n    required: true\n  },\n  classes: {\n    type: [String, Array, Object],\n    default: ''\n  }\n})\nconst isEmpty = computed(() => {\n  const value = store.getters.getValue(props.name);\n  return value === undefined || value === null || value === '';\n});\nconst inputGroupClass = computed(() => {\n  return {\n    \"botyglot-form--class-when-not-empty\": !isEmpty.value,\n    \"botyglot-form--class-when-empty\": isEmpty.value\n  };\n});\n</script>\n","<template>\n  <ComponentWrapper :name=\"name\" :classes=\"inputGroupClass\" :id=\"id\">\n    <input type=\"hidden\" :value=\"inputValue\" :name=\"name\"/>\n\n    <div v-if=\"prepend\" class=\"input-block__prepend\" :id=\"id + '__prepend'\">\n      <span v-html=\"prepend\"></span>\n    </div>\n\n    <vSelect\n        :id=\"id\"\n        :class=\"[inputClass, prepend ? 'input&#45;&#45;has-prepend' : '', append ? 'input&#45;&#45;has-append' : '']\"\n        label=\"display_name\"\n        value=\"id\"\n        :name=\"name\"\n        :reduce=\"option => option.id\"\n        v-model=\"inputValue\"\n        @search:focus=\"inputTouched=true\"\n        :options=\"choicesToJson\"\n        v-bind=\"$attrs\"\n    />\n\n    <div v-if=\"append\" class=\"input-block__append\" :id=\"id + '__append'\">\n      <span v-html=\"append\"></span>\n    </div>\n\n    <ErrorsPlaceholder v-if='displayError' :names=[name]></ErrorsPlaceholder>\n  </ComponentWrapper>\n</template>\n\n\n<script setup>\nimport { computed, toRefs, watch } from 'vue';\nimport { useStore } from 'vuex';\n\nimport vSelect from \"vue-select\"\nimport ErrorsPlaceholder from \"./errors_placeholder.vue\";\nimport ComponentWrapper from \"./component_wrapper.vue\";\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst props = defineProps({\n  append: {\n    type: String,\n  },\n  choices: {\n    type: String,\n    required: true\n  },\n  include_blank: {\n    type: String,\n    required: true\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  id: {\n    type: String,\n    required: true\n  },\n  prepend: {\n    type: String,\n  },\n  suggest_value: { // do not use directly (instead use the computed property suggestValue)\n    type: [String, Boolean],\n    required: false,\n    default: false\n  },\n  display_error: { // do not use directly (instead use the computed property displayError)\n    type: [String, Boolean],\n    required: false,\n    default: true\n  }\n})\n\nconst store = useStore();\nconst { append, choices, include_blank, name, id, prepend, suggest_value, display_error } = toRefs(props)\n\nconst choicesToJson = computed(() => {\n  return store.getters.getPotentialValues(name.value) || JSON.parse(choices.value);\n})\n\nconst displayValidationError = computed(() => {\n  return inputTouched.value && inputError.value;\n})\n\nconst displayValidationWarning = computed(() => {\n  return inputTouched.value && !inputError.value && inputWarning.value;\n})\n\nconst suggestValue = computed(() => {\n  return (suggest_value.value === 'true' || suggest_value.value === true || suggest_value.value === 'force');\n})\n\nconst displayError = computed(() => {\n  return (display_error.value === 'true' || display_error.value === true)\n})\n\nconst useSuggestedValue = computed(() => {\n  return (suggestValue.value && !inputTouched.value) || suggest_value.value === 'force'\n})\n\n\nconst suggestedValue = computed(() => {\n  return store.getters.getSuggestedValues(name.value)\n})\n\nconst includeBlank = computed(() => {\n  return include_blank.value === 'true'\n})\n\nconst inputClass = computed(() => {\n  return {\n    \"form-control\": true,\n    \"custom-autocomplete\": true,\n    \"is-invalid\": (inputTouched.value && inputError.value)\n  };\n});\n\nconst inputError = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getError(name.value)\n  } else {\n    return null\n  }\n});\n\nconst inputWarning = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getWarning(name.value)\n  } else {\n    return null\n  }\n});\n\nconst inputGroupClass = computed(() => {\n  return {\n    \"input-block\": true\n  };\n});\n\nconst inputTouched = computed({\n  get () {\n    return store.getters.getTouched(name.value);\n  },\n  set (value) {\n    store.commit('setTouched', {\n      value: value,\n      name: name.value\n    });\n  }\n});\n\nconst inputValue = computed({\n  get () {\n    return store.getters.getValue(name.value);\n  },\n  set (value) {\n    store.dispatch('update', {\n      value: value,\n      name: name.value\n    });\n  }\n});\n\nwatch(suggestedValue, (value, _oldValue) => {\n  if (useSuggestedValue.value) {\n    inputValue.value = value;\n  }\n});\n</script>\n","<template>\n  <label class=\"checkbox__container\" :id=\"id + '__wrapper'\">\n    <input type=\"hidden\" :name=\"name\" :value=\"unchecked_value\" />\n    <input class=\"checkbox\" ref=\"input\" v-bind=\"$attrs\" :class=\"inputClass\" :name=\"name\" :id=\"id\" v-model=\"inputValue\" v-on:focus=\"inputTouched=true\" :value=\"checked_value\" />\n    <span class=\"checkbox__custom\"></span>\n    &nbsp;\n    <ErrorsPlaceholder v-if='displayError' :names=\"[name]\"> </ErrorsPlaceholder>\n  </label>\n</template>\n\n<script setup>\nimport { computed, toRefs, watch } from 'vue';\nimport { useStore } from 'vuex';\nimport ErrorsPlaceholder from \"./errors_placeholder.vue\";\nconst props = defineProps({\n  checked_value: {\n    type: String,\n    required: true\n  },\n  unchecked_value: {\n    type: String,\n    required: true\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  id: {\n    type: String,\n    required: true\n  },\n  suggest_value: { // do not use directly (instead use the computed property suggestValue)\n    type: [String, Boolean],\n    required: false,\n    default: false\n  },\n  display_error: { // do not use directly (instead use the computed property displayError)\n    type: [String, Boolean],\n    required: false,\n    default: true\n  }\n});\nconst store = useStore();\nconst { checked_value, unchecked_value, name, id, suggest_value, display_error } = toRefs(props);\nconst displayValidationError = computed(() => {\n  return inputTouched.value && inputError.value;\n});\nconst displayValidationWarning = computed(() => {\n  return inputTouched.value && !inputError.value && inputWarning.value;\n});\nconst suggestValue = computed(() => {\n  return (suggest_value.value === 'true' || suggest_value.value === true || suggest_value.value === \"force\");\n});\nconst displayError = computed(() => {\n  return (display_error.value === 'true' || display_error.value === true);\n});\nconst useSuggestedValue = computed(() => {\n  return (suggestValue.value && !inputTouched.value) || suggest_value.value === 'force';\n});\nconst suggestedValue = computed(() => {\n  return store.getters.getSuggestedValues(name.value);\n});\nconst inputClass = computed(() => {\n  return {\n    \"input-block__field--invalid\": (inputTouched.value && inputError.value),\n    \"input-block__field--warning\": (inputTouched.value && !inputError.value && inputWarning.value)\n  };\n});\nconst inputError = computed(() => {\n  let error = store.getters.getError(name.value);\n  if (inputTouched.value) {\n    return error ? error : null;\n  } else {\n    return null;\n  }\n});\nconst inputWarning = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getWarning(name.value);\n  } else {\n    return null;\n  }\n});\nconst inputTouched = computed({\n  get() {\n    return store.getters.getTouched(name.value);\n  },\n  set(value) {\n    store.commit('setTouched', {\n      value: value,\n      name: name.value\n    });\n  }\n});\nconst inputValue = computed({\n  get() {\n    let value = store.getters.getValue(name.value);\n    return ((value === true) || (value === name.value));\n  },\n  set(value) {\n    store.dispatch('update', {\n      value: value,\n      name: name.value\n    });\n  }\n});\nwatch(suggestedValue, (value, _oldValue) => {\n  if (useSuggestedValue.value) {\n    inputValue.value = value;\n  }\n});\n</script>\n","<template>\n  <ComponentWrapper :name=\"name\" :classes=\"inputGroupClass\" :id=\"id\">\n    <div v-if=\"prepend\" class=\"input-block__prepend\" :id=\"id + '__prepend'\">\n      <span v-html=\"prepend\"></span>\n    </div>\n\n    <input type=\"hidden\" :name=\"name\" :value=\"inputValue\" @input=\"inputValue = $event.target.value\" />\n\n    <flat-pickr\n        ref=\"input\"\n        v-bind=\"$attrs\"\n        v-model=\"inputFormattedValue\"\n        :id=\"id\"\n        :class=\"[\n        inputClass,\n        prepend ? 'input--has-prepend' : '',\n        append ? 'input--has-append' : '',\n      ]\"\n        :config=\"config\"\n        @on-open=\"onFocusDatePicker\"\n    ></flat-pickr>\n\n    <div v-if=\"clearOption\" class=\"botyglot--date-component-append-actions\">\n      <button class=\"botyglot--date-component--clear-value\" type=\"button\" title=\"Clear\" data-clear @click=\"clearDate\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"1.3rem\" width=\"1.3rem\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6 18 18 6M6 6l12 12\" />\n        </svg>\n\n        <span aria-hidden=\"true\" class=\"sr-only\">Clear</span>\n      </button>\n    </div>\n\n    <div v-if=\"append\" class=\"input-block__append\" :id=\"id + '__append'\">\n      <span v-html=\"append\"></span>\n    </div>\n\n    <ErrorsPlaceholder v-if='displayError' :names=[name]></ErrorsPlaceholder>\n  </ComponentWrapper>\n</template>\n\n<script setup>\nimport { computed, ref, toRefs, watch } from \"vue\"\nimport { useStore } from 'vuex';\nimport { debounce } from \"lodash\";\nimport { format, isValid, parse, isMatch } from \"date-fns\";\nimport flatPickr from \"vue-flatpickr-component\";\nimport \"flatpickr/dist/flatpickr.css\";\nimport * as R from \"ramda\";\nimport ErrorsPlaceholder from \"./errors_placeholder.vue\";\nimport ComponentWrapper from \"./component_wrapper.vue\";\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst props = defineProps({\n  append: {\n    type: String,\n  },\n  clear_option: {\n    type: [String, Boolean],\n    required: true,\n  },\n  name: {\n    type: String,\n    required: true,\n  },\n  id: {\n    type: String,\n    required: true,\n  },\n  prepend: {\n    type: String,\n  },\n  suggest_value: { // do not use directly (instead use the computed property suggestValue)\n    type: [String, Boolean],\n    required: false,\n    default: false\n  },\n  display_error: { // do not use directly (instead use the computed property displayError)\n    type: [String, Boolean],\n    required: false,\n    default: true\n  },\n  display_format: {\n    type: String,\n    required: false,\n    default: \"dd/MM/yyyy\",\n  },\n})\n\nconst { append, clear_option, name, id, prepend, suggest_value, display_error, display_format } = toRefs(props)\nconst store = useStore();\n\n// Methods\nconst pickerFormat = () => {\n  let format;\n\n  if (display_format.value === 'dd MMM yy') {\n    format = 'j M y'\n  } else if (display_format.value === 'dd/MM/yyyy') {\n    format = 'd/m/Y';\n  } else {\n    format = 'd/m/Y';\n  }\n\n  return format\n}\n\nconst convertStringToDate = (value, displayFormat) => isMatch(value, displayFormat) ? parse(value, displayFormat, new Date()) : null\n\nconst setFormattedValue = (value) => {\n  if (!R.isNil(value) && !R.isEmpty(value) && !isMatch(value, display_format.value)) {\n    return\n  }\n\n  let date = convertStringToDate(value, display_format.value)\n\n  store.dispatch(\"update\", {\n    value: isValid(date) ? format(date, \"yyyy-MM-dd\") : \"\",\n    name: name.value,\n  });\n}\n\nconst clearDate = () => {\n  store.dispatch(\"update\", {\n    value: \"\",\n    name: name.value,\n  })\n}\n\nconst onFocusDatePicker = () => {\n  inputTouched.value = true\n}\n\nconst checkIsValidFormat = (value, display_format) => {\n  return !R.isNil(value) && !R.isEmpty(value) && isMatch(value, display_format)\n}\n\nconst config = ref({\n  dateFormat: pickerFormat(),\n  allowInput: true,\n})\n\nconst debouncedSetFormattedValue = debounce(setFormattedValue, 500);\n\n\n// Computed functions\n\nconst displayValidationError = computed(() => {\n  return inputTouched.value && inputError.value;\n});\n\n\nconst displayValidationWarning = computed(() => {\n  return inputTouched.value && !inputError.value && inputWarning.value;\n});\n\nconst suggestValue = computed(() => {\n  return (suggest_value.value === 'true' || suggest_value.value === true || suggest_value.value === \"force\")\n});\n\nconst clearOption = computed(() => {\n  return (clear_option.value === 'true' || clear_option.value === true)\n});\n\nconst displayError = computed(() => {\n  return (display_error.value === 'true' || display_error.value === true)\n});\n\nconst useSuggestedValue = computed(() => {\n  return (suggestValue.value && !inputTouched.value) || suggest_value.value === 'force'\n});\n\nconst suggestedValue = computed(() => {\n  return store.getters.getSuggestedValues(name.value);\n});\n\nconst inputClass = computed(() => {\n  return {\n    \"input-block__field\": true,\n    \"input-block__field--invalid\": (inputTouched.value && inputError.value),\n    \"input-block__field--warning\": (inputTouched.value && !inputError.value && inputWarning.value),\n    datepicker: true,\n  };\n});\n\nconst inputError = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getError(name.value);\n  } else {\n    return null;\n  }\n});\n\nconst inputWarning = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getWarning(name.value);\n  } else {\n    return null;\n  }\n});\n\nconst inputGroupClass = computed(() => {\n  return {\n    \"input-block\": true,\n  };\n});\n\nconst inputTouched = computed({\n  get () {\n    return store.getters.getTouched(name.value);\n  },\n  set (value) {\n    store.commit('setTouched', {\n      value: value,\n      name: name.value\n    });\n  }\n});\n\nconst inputValue = computed({\n  get () {\n    return store.getters.getValue(name.value);\n  },\n  set (value) {\n    store.dispatch('update', {\n      value: value,\n      name: name.value\n    });\n  }\n});\n\n\nconst inputFormattedValue = computed({\n  get () {\n    let value = store.getters.getValue(name.value);\n    let date = convertStringToDate(value, \"yyyy-MM-dd\")\n\n    if (isValid(date)) {\n      return format(date, display_format.value);\n    } else {\n      return \"\";\n    }\n  },\n  set (value) {\n    // user is probably typing a new date, wait for him to finish\n    // and avoid unnecessary updates of the state\n    debouncedSetFormattedValue(value)\n  }\n});\n\n\nwatch(suggestedValue, (value, _oldValue) => {\n  if (useSuggestedValue.value) {\n    inputValue.value = value;\n  }\n});\n</script>\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.confirmDatePlugin = factory());\n}(this, (function () { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation.\r\n\r\n    Permission to use, copy, modify, and/or distribute this software for any\r\n    purpose with or without fee is hereby granted.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n    PERFORMANCE OF THIS SOFTWARE.\r\n    ***************************************************************************** */\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\n\n    function getEventTarget(event) {\n        try {\n            if (typeof event.composedPath === \"function\") {\n                var path = event.composedPath();\n                return path[0];\n            }\n            return event.target;\n        }\n        catch (error) {\n            return event.target;\n        }\n    }\n\n    var defaultConfig = {\n        confirmIcon: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='17' height='17' viewBox='0 0 17 17'> <g> </g> <path d='M15.418 1.774l-8.833 13.485-4.918-4.386 0.666-0.746 4.051 3.614 8.198-12.515 0.836 0.548z' fill='#000000' /> </svg>\",\n        confirmText: \"OK \",\n        showAlways: false,\n        theme: \"light\",\n    };\n    function confirmDatePlugin(pluginConfig) {\n        var config = __assign(__assign({}, defaultConfig), pluginConfig);\n        var confirmContainer;\n        var confirmButtonCSSClass = \"flatpickr-confirm\";\n        return function (fp) {\n            if (fp.config.noCalendar || fp.isMobile)\n                return {};\n            return __assign({ onKeyDown: function (_, __, ___, e) {\n                    var eventTarget = getEventTarget(e);\n                    var isTargetLastFocusableElement = (!fp.config.time_24hr && eventTarget === fp.amPM) ||\n                        (fp.config.time_24hr &&\n                            ((fp.config.enableSeconds && eventTarget === fp.secondElement) ||\n                                (!fp.config.enableSeconds && eventTarget === fp.minuteElement)));\n                    if (fp.config.enableTime &&\n                        e.key === \"Tab\" &&\n                        isTargetLastFocusableElement) {\n                        e.preventDefault();\n                        confirmContainer.focus();\n                    }\n                    else if (e.key === \"Enter\" && eventTarget === confirmContainer)\n                        fp.close();\n                },\n                onReady: function () {\n                    confirmContainer = fp._createElement(\"div\", confirmButtonCSSClass + \" \" + (config.showAlways ? \"visible\" : \"\") + \" \" + config.theme + \"Theme\", config.confirmText);\n                    confirmContainer.tabIndex = -1;\n                    confirmContainer.innerHTML += config.confirmIcon;\n                    confirmContainer.addEventListener(\"click\", fp.close);\n                    fp.calendarContainer.appendChild(confirmContainer);\n                    fp.loadedPlugins.push(\"confirmDate\");\n                } }, (!config.showAlways\n                ? {\n                    onChange: function (_, dateStr) {\n                        var showCondition = fp.config.enableTime ||\n                            fp.config.mode === \"multiple\" ||\n                            fp.loadedPlugins.indexOf(\"monthSelect\") !== -1;\n                        var localConfirmContainer = fp.calendarContainer.querySelector(\".\" + confirmButtonCSSClass);\n                        if (!localConfirmContainer)\n                            return;\n                        if (dateStr &&\n                            !fp.config.inline &&\n                            showCondition &&\n                            localConfirmContainer)\n                            return localConfirmContainer.classList.add(\"visible\");\n                        localConfirmContainer.classList.remove(\"visible\");\n                    },\n                }\n                : {}));\n        };\n    }\n\n    return confirmDatePlugin;\n\n})));\n","<template>\n  <ComponentWrapper :name=\"name\" :classes=\"inputGroupClass\" :id=\"id\">\n    <div v-if=\"prepend\" class=\"input-block__prepend\" :id=\"id + '__prepend'\">\n      <span v-html=\"prepend\"></span>\n    </div>\n\n    <input type=\"hidden\" :name=\"name\" :value=\"inputValue\" @input=\"inputValue = $event.target.value\"/>\n\n    <flat-pickr\n        ref=\"input\"\n        v-bind=\"$attrs\"\n        v-model=\"inputFormattedValue\"\n        :id=\"id\"\n        :class=\"[\n            inputClass,\n            prepend ? 'input--has-prepend' : '',\n             append ? 'input--has-append' : '',\n             ]\"\n        :config=\"config\"\n        @on-open=\"onFocusDatePicker\"\n    ></flat-pickr>\n\n    <div v-if=\"append\" class=\"input-block__append\" :id=\"id + '__append'\">\n      <span v-html=\"append\"></span>\n    </div>\n\n    <ErrorsPlaceholder v-if='displayError' :names=[name]></ErrorsPlaceholder>\n  </ComponentWrapper>\n</template>\n\n\n<script setup>\nimport { computed, ref, toRefs, watch } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { debounce } from \"lodash\";\nimport { formatISO, isMatch, isValid, parse } from \"date-fns\";\nimport { format, utcToZonedTime, zonedTimeToUtc } from \"date-fns-tz\";\nimport flatPickr from \"vue-flatpickr-component\";\nimport ConfirmDatePlugin from 'flatpickr/dist/plugins/confirmDate/confirmDate';\nimport 'flatpickr/dist/plugins/confirmDate/confirmDate.css';\nimport \"flatpickr/dist/flatpickr.css\";\nimport * as R from 'ramda'\nimport ErrorsPlaceholder from \"./errors_placeholder.vue\";\nimport ComponentWrapper from \"./component_wrapper.vue\";\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst props = defineProps({\n  append: {\n    type: String,\n  },\n  name: {\n    type: String,\n    required: true,\n  },\n  id: {\n    type: String,\n    required: true,\n  },\n  prepend: {\n    type: String,\n  },\n  suggest_value: { // do not use directly (instead use the computed property suggestValue)\n    type: [String, Boolean],\n    required: false,\n    default: false\n  },\n  display_error: { // do not use directly (instead use the computed property displayError)\n    type: [String, Boolean],\n    required: false,\n    default: true\n  },\n  display_format: {\n    type: String,\n    required: false,\n    default: \"dd/MM/yyyy HH:mm\",\n  },\n  time_zone: {\n    type: String,\n    required: true,\n  }\n})\n\nconst store = useStore();\nconst { append, name, id, prepend, suggest_value, display_error, display_format, time_zone } = toRefs(props);\n\n// Methods\nconst onFocusDatePicker = () => {\n  inputTouched.value = true\n}\n\nconst pickerFormat = () => {\n  let format;\n\n  if (display_format.value === 'dd MMM yy HH:mm') {\n    format = 'j M y H:i'\n  } else if (display_format.value === 'dd/MM/yyyy HH:mm') {\n    format = 'd/m/Y H:i';\n  } else {\n    format = 'd/m/Y H:i';\n  }\n\n  return format\n}\n\nconst setFormattedValue = (value) => {\n  let displayFormat = display_format.value\n\n  if (!R.isNil(value) && !R.isEmpty(value) && !isMatch(value, displayFormat)) {\n    // ignore non-blank & unmatched values\n    // user is probably typing a new date, wait for him to finish\n    return\n  }\n\n  let date = parse(value, displayFormat, getCurrentDateInTimezone());\n  let normalised_date = isValid(date) ? formatISO(zonedTimeToUtc(date, time_zone.value)) : ''\n\n  store.dispatch(\"update\", {\n    value: normalised_date,\n    name: name.value,\n  });\n}\n\n\nconst getCurrentDateInTimezone = () => {\n  const zeroPad = (num, places) => {\n    let zero = places - num.toString().length + 1;\n    return Array(+(zero > 0 && zero)).join(\"0\") + num;\n  }\n\n  // construct the date in UTC (ex: 2014-06-25T10:00:00.000Z)\n  let date = new Date()\n  let year = zeroPad(date.getUTCFullYear(), 4)\n  let month = zeroPad(date.getUTCMonth() + 1, 2)\n  let day = zeroPad(date.getUTCDate(), 2)\n  let hour = zeroPad(date.getUTCHours(), 2)\n  let minute = zeroPad(date.getUTCMinutes(), 2)\n  let second = zeroPad(date.getUTCSeconds(), 2)\n  let dateString = `${year}-${month}-${day}T${hour}:${minute}:${second}.000Z`\n\n  // convert to timezone\n  return utcToZonedTime(dateString, time_zone.value)\n}\n\n\nconst config = ref({\n  dateFormat: pickerFormat(),\n  allowInput: true,\n  enableTime: true,\n  time_24hr: true,\n  \"plugins\": [new ConfirmDatePlugin({ confirmText: \"Done\" })]\n})\n\nconst debouncedSetFormattedValue = debounce(setFormattedValue, 500)\n\n\n// Computed\nconst displayValidationError = computed(() => {\n  return inputTouched.value && inputError.value;\n})\n\n\nconst displayValidationWarning = computed(() => {\n  return inputTouched.value && !inputError.value && inputWarning.value;\n})\n\nconst suggestValue = computed(() => {\n  return (suggest_value.value === 'true' || suggest_value.value === true || suggest_value.value === \"force\")\n})\n\nconst displayError = computed(() => {\n  return (display_error.value === 'true' || display_error.value === true)\n})\n\nconst useSuggestedValue = computed(() => {\n  return (suggestValue.value && !inputTouched.value) || suggest_value.value === 'force'\n})\n\nconst suggestedValue = computed(() => {\n  return store.getters.getSuggestedValues(name.value);\n})\n\nconst inputClass = computed(() => {\n  return {\n    \"input-block__field\": true,\n    \"input-block__field--invalid\": (inputTouched.value && inputError.value),\n    \"input-block__field--warning\": (inputTouched.value && !inputError.value && inputWarning.value),\n    datepicker: true,\n  };\n})\n\n\nconst inputError = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getError(name.value);\n  } else {\n    return null;\n  }\n})\n\nconst inputWarning = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getWarning(name.value);\n  } else {\n    return null;\n  }\n})\n\nconst inputGroupClass = computed(() => {\n  return {\n    \"input-block\": true,\n  };\n})\n\nconst inputTouched = computed({\n  get () {\n    return store.getters.getTouched(name.value);\n  },\n  set (value) {\n    store.commit('setTouched', {\n      value: value,\n      name: name.value\n    });\n  }\n});\n\nconst inputValue = computed({\n  get () {\n    return store.getters.getValue(name.value);\n  },\n  set (value) {\n    store.dispatch(\"update\", {\n      value: value,\n      name: name.value,\n    });\n  }\n});\n\n\nconst inputFormattedValue = computed({\n  get () {\n    let value = store.getters.getValue(name.value)\n    let tempDate = value == null ? \"\" : new Date(value);\n\n    if (isValid(tempDate)) {\n      // it is safe to parse Value using utcToZonedTime\n      return format(\n          utcToZonedTime(value, time_zone.value),\n          display_format.value\n      );\n    } else {\n      return \"\";\n    }\n  },\n  set (value) {\n    // user is probably typing a new date, wait for him to finish\n    // and avoid unnecessary updates of the state\n    debouncedSetFormattedValue(value)\n  }\n});\n\nwatch(suggestedValue, (value, _oldValue) => {\n  if (useSuggestedValue.value) {\n    inputValue.value = value;\n  }\n});\n</script>\n","<template>\n  <ComponentWrapper :name=\"name\" :classes=\"inputGroupClass\" :id=\"id\">\n\n    <div v-if=\"prepend\" class=\"input-block__prepend\" :id=\"id + '__prepend'\">\n      <span v-html=\"prepend\"></span>\n    </div>\n\n    <input v-bind=\"$attrs\"\n           :class=\"[inputClass, prepend ? 'input--has-prepend' : '', append ? 'input--has-append' : '']\"\n           :id=\"id\"\n           :value=\"inputValue\"\n           @input=\"inputValue=$event.target.value\"\n           @focus=\"inputTouched=true\"\n           :name=\"name\"/>\n\n    <div v-if=\"append\" class=\"input-block__append\" :id=\"id + '__append'\">\n      <span v-html=\"append\"></span>\n    </div>\n\n    <ErrorsPlaceholder v-if='displayError' :names=\"[name]\"></ErrorsPlaceholder>\n  </ComponentWrapper>\n</template>\n\n<script setup>\nimport { computed, toRefs, watch } from 'vue';\nimport { useStore } from 'vuex';\n\nimport ErrorsPlaceholder from \"./errors_placeholder.vue\";\nimport ComponentWrapper from \"./component_wrapper.vue\";\n\n\nconst props = defineProps({\n  append: {\n    type: String,\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  id: {\n    type: String,\n    required: true\n  },\n  prepend: {\n    type: String,\n  },\n  suggest_value: { // do not use directly (instead use the computed property suggestValue)\n    type: [String, Boolean],\n    required: false,\n    default: false\n  },\n  display_error: { // do not use directly (instead use the computed property displayError)\n    type: [String, Boolean],\n    required: false,\n    default: true\n  }\n});\n\nconst store = useStore();\nconst { append, name, id, prepend, suggest_value, display_error } = toRefs(props);\n\nconst suggestValue = computed(() => {\n  return (suggest_value.value === 'true' || suggest_value.value === true || suggest_value.value === \"force\");\n});\nconst displayError = computed(() => {\n  return (display_error.value === 'true' || display_error.value === true);\n});\nconst useSuggestedValue = computed(() => {\n  return (suggestValue.value && !inputTouched.value) || suggest_value.value === 'force';\n});\nconst suggestedValue = computed(() => {\n  return store.getters.getSuggestedValues(name.value);\n});\nconst inputTouched = computed({\n  get () {\n    return store.getters.getTouched(name.value);\n  },\n  set (value) {\n    store.commit('setTouched', {\n      value: value,\n      name: name.value\n    });\n  }\n});\nconst inputValue = computed({\n  get () {\n    return store.getters.getValue(name.value);\n  },\n  set (value) {\n    store.dispatch('update', {\n      value: value,\n      name: name.value\n    });\n  }\n});\nconst inputError = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getError(name.value);\n  } else {\n    return null;\n  }\n});\nconst inputWarning = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getWarning(name.value);\n  } else {\n    return null;\n  }\n});\nconst inputClass = computed(() => {\n  return {\n    \"input-block__field\": true,\n    \"input-block__field--invalid\": (inputTouched.value && inputError.value),\n    \"input-block__field--warning\": (inputTouched.value && !inputError.value && inputWarning.value)\n  };\n});\nconst inputGroupClass = computed(() => {\n  return {\n    \"input-block\": true\n  };\n});\nwatch(suggestedValue, (value, _oldValue) => {\n  if (useSuggestedValue.value) {\n    inputValue.value = value;\n  }\n});\n</script>\n","<template>\n  <form\n      v-bind:accept-charset=\"acceptCharset\"\n      v-bind:action=\"action\"\n      v-bind:data-values=\"dataValues\"\n      v-bind:method=\"method\"\n      v-bind:enctype=\"enctype\"\n      @submit=\"handleSubmit\"\n      @ajax:beforeSend=\"ajaxBeforeSend\"\n      ref=\"form\"\n  >\n    <slot></slot>\n  </form>\n</template>\n\n<script setup>\nimport { toRefs, computed, ref, watch } from \"vue\";\nimport { useStore } from \"vuex\"\nconst props = defineProps({\n  acceptCharset: {\n    type: String,\n    required: true,\n    default: 'UTF-8'\n  },\n  action: {\n    type: String,\n    required: true,\n  },\n  enctype: {\n    type: String,\n  },\n  method: {\n    type: String,\n    required: true,\n    default: \"post\"\n  },\n  autoSubmit: {\n    type: String,\n    default: ''\n  }\n})\nconst timer = ref(null)\nconst form = ref(null)\nconst { acceptCharset, action, enctype, method, autoSubmit } = toRefs(props)\nconst store = useStore();\nconst values = computed(() => {\n  return store.getters.getValue(store.getters.getMeta('modelName'))\n})\nconst debounce = (timeout = 500) => {\n  clearTimeout(timer.value)\n  // GOTCHA: DO NOT USE form.submit() because it does not play well with HOTWIRE\n  //  * instead, use form.requestSubmit() that acts as if a submit button were clicked\n  //    and therefor is compatible with HOTWIRE\n  timer.value = setTimeout(() => {\n    form.requestSubmit();\n  }, timeout)\n}\nconst handleSubmit = (event) => {\n  if (store.getters.getMeta('disableValidation')) {\n    return // early exit (will continue with the submit)\n  }\n  store.commit('setTouched', {\n    value: true,\n    name: `${store.getters.getMeta('modelName')}._submit`\n  })\n  if (!store.getters.getError(`${store.getters.getMeta('modelName')}._is_valid`)) {\n    // invalid data => du not submit\n    event.preventDefault();\n  }\n}\nconst ajaxBeforeSend = (event) => {\n  if (!store.getters.getError(`${store.getters.getMeta('modelName')}._is_valid`)) {\n    // ignore RailsUjs: make that when using rails ujs with remote:true (aka local:false) we do not send the form\n    // if the data is valid note: there is no test for this specific case !!\n    event.preventDefault();\n  }\n}\nwatch(values, (value, _oldValue) => {\n  if (autoSubmit.value === \"onChange\") {\n    debounce(750)\n  }\n});\n</script>\n","<template>\n  <input v-bind=\"$attrs\" :id=\"id\" :name=\"name\" :value=\"inputValue\" @input=\"inputValue=$event.target.value\" />\n</template>\n\n\n<script setup>\nimport { computed, toRefs, watch } from \"vue\";\nimport { useStore } from \"vuex\";\n\ndefineOptions({\n  inheritAttrs: false,\n})\nconst props = defineProps({\n  append: {\n    type: String,\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  id: {\n    type: String,\n    required: true\n  },\n  prepend: {\n    type: String,\n  },\n  suggest_value: { // do not use directly (instead use the computed property suggestValue)\n    type: [String, Boolean],\n    required: false,\n    default: false\n  },\n})\nconst store = useStore();\nconst { append, name, id, prepend, suggest_value } = toRefs(props)\nconst inputValue = computed({\n  get () {\n    return store.getters.getValue(name.value);\n  },\n  set (value) {\n    store.dispatch('update', {\n      value: value,\n      name: name.value\n    });\n  }\n});\nconst suggestValue = computed(() => {\n  return (suggest_value.value === 'true' || suggest_value.value === true)\n})\nconst useSuggestedValue = computed(() => {\n  return suggestValue.value\n})\nconst suggestedValue = computed(() => {\n  return store.getters.getSuggestedValues(name.value)\n})\nwatch(suggestedValue, (value, _oldValue) => {\n  if (useSuggestedValue.value) {\n    inputValue.value = value;\n  }\n});\n</script>\n","<template>\n  <ComponentWrapper :name=\"name\" :classes=\"inputGroupClass\" :id=\"id\">\n    <input type=\"hidden\" :name=\"name\" :value=\"inputValue\" @input=\"inputValue=$event.target.value\" />\n\n    <VueMonacoEditor\n        v-bind=\"$attrs\"\n        ref=\"editor\"\n        :id=\"id\"\n        :class=\"inputClass\"\n        language=\"ruby\"\n        v-model:value=\"inputValue\"\n        @focus=\"inputTouched = true\"\n        :options=\"MONACO_EDITOR_OPTIONS\"\n        @editorDidMount=\"onEditorDidMount\"\n    />\n\n    <ErrorsPlaceholder v-if='displayError' :names=[name]></ErrorsPlaceholder>\n  </ComponentWrapper>\n</template>\n\n\n<script setup>\nimport { toRefs, computed, watch } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { VueMonacoEditor } from '@guolao/vue-monaco-editor'\n\nimport ComponentWrapper from \"./component_wrapper.vue\";\nimport ErrorsPlaceholder from \"./errors_placeholder.vue\";\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst props = defineProps({\n  id: {\n    type: String,\n    required: true\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  readonly: {\n    type: Boolean,\n    required: false,\n    default: false\n  },\n  suggest_value: { // do not use directly (instead use the computed property suggestValue)\n    type: [String, Boolean],\n    required: false,\n    default: false\n  },\n  display_error: { // do not use directly (instead use the computed property displayError)\n    type: [String, Boolean],\n    required: false,\n    default: true\n  },\n})\n\nconst store = useStore();\nconst { id, name, readonly, suggest_value, display_error } = toRefs(props)\n\n\nconst displayValidationError = computed(() => inputTouched.value && inputError.value);\n\nconst displayValidationWarning = computed(() => inputTouched.value && !inputError.value && inputWarning.value);\n\nconst suggestValue = computed(() => suggest_value.value === \"true\" || suggest_value.value === true || suggest_value.value === \"force\");\n\nconst displayError = computed(() => display_error.value === \"true\" || display_error.value === true);\n\nconst useSuggestedValue = computed(() => (suggestValue.value && !inputTouched.value) || suggest_value.value === 'force');\n\nconst suggestedValue = computed(() => store.getters.getSuggestedValues(name.value));\n\nconst inputClass = computed(() => {\n  return {\n    \"input-block__field\": true,\n    \"input-block__field--invalid\": (inputTouched.value && inputError.value),\n    \"input-block__field--warning\": (inputTouched.value && !inputError.value && inputWarning.value),\n    \"editor\": true\n  }\n});\n\nconst inputError = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getError(name.value);\n  } else {\n    return null;\n  }\n});\n\nconst inputWarning = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getWarning(name.value);\n  } else {\n    return null;\n  }\n});\n\nconst inputGroupClass = computed(() => {\n  return {\n    \"input-block\": true,\n  }\n});\n\nconst inputTouched = computed({\n  get () {\n    return store.getters.getTouched(name.value);\n  },\n  set (value) {\n    store.commit('setTouched', {\n      value: value,\n      name: name.value\n    });\n  }\n});\n\nconst inputValue = computed({\n  get () {\n    return store.getters.getValue(name.value);\n  },\n  set (value) {\n    store.dispatch('update', {\n      value: value,\n      name: name.value\n    });\n\n    inputTouched.value = true\n  }\n});\n\nconst MONACO_EDITOR_OPTIONS = {\n  minimap: { enabled: false },\n  automaticLayout: true,\n  autoIndent: true,\n  lineNumbers: 'on',\n  readOnly: readonly.value,\n  autoClosingBrackets: 'always',\n  formatOnPaste: true,\n  formatOnType: true,\n  tabSize: 2\n}\n\nconst onEditorDidMount = (editor) => {\n  let count = 5;\n  let countdownInteval = setInterval(() => {\n    editor.layout();\n    count--\n    if (count === 0) {\n      clearInterval(countdownInteval);\n    }\n  }, 100);\n};\n\nwatch(suggestedValue, (value, _oldValue) => {\n  if (useSuggestedValue.value) {\n    inputValue.value = value;\n  }\n});\n</script>\n","<template>\n  <ComponentWrapper :name=\"name\" :id=\"id\">\n\n    <input type=\"hidden\" :name=\"name\" :value=\"inputValue\"/>\n    <QuillEditor\n        :id=\"id\"\n        theme=\"snow\"\n        v-bind=\"$attrs\"\n        v-model:content=\"inputValue\"\n        toolbar=\"minimal\"\n        :class=\"inputClass\"\n        @focus=\"inputTouched = true\"\n        :name=\"name\"/>\n\n    <ErrorsPlaceholder v-if='displayError' :names=[name]></ErrorsPlaceholder>\n  </ComponentWrapper>\n</template>\n\n<script setup>\nimport { computed, toRefs, watch } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { QuillEditor } from '@vueup/vue-quill'\nimport '@vueup/vue-quill/dist/vue-quill.snow.css';\n\nimport ComponentWrapper from \"./component_wrapper.vue\";\nimport ErrorsPlaceholder from \"./errors_placeholder.vue\";\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst props = defineProps({\n  id: {\n    type: String,\n    required: true\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  suggest_value: { // do not use directly (instead use the computed property suggestValue)\n    type: [String, Boolean],\n    required: false,\n    default: false\n  },\n  display_error: { // do not use directly (instead use the computed property displayError)\n    type: [String, Boolean],\n    required: false,\n    default: true\n  },\n})\n\nconst store = useStore();\nconst { id, name, suggest_value, display_error } = toRefs(props)\n\nconst displayValidationError = computed(() => {\n  return inputTouched.value && inputError.value;\n})\n\nconst displayValidationWarning = computed(() => {\n  return inputTouched.value && !inputError.value && inputWarning.value;\n})\n\nconst suggestValue = computed(() => {\n  return (suggest_value.value === 'true' || suggest_value.value === true || suggest_value.value === 'force')\n})\n\nconst displayError = computed(() => {\n  return (display_error.value === 'true' || display_error.value === true)\n})\n\nconst useSuggestedValue = computed(() => {\n  return (suggestValue.value && !inputTouched.value) || suggest_value.value === 'force'\n})\n\nconst suggestedValue = computed(() => {\n  return store.getters.getSuggestedValues(name.value)\n})\n\nconst inputClass = computed(() => {\n  return {\n    \"input-block__field\": true,\n    \"input-block__field--invalid\": (inputTouched.value && inputError.value),\n    \"input-block__field--warning\": (inputTouched.value && !inputError.value && inputWarning.value)\n  }\n})\n\nconst inputError = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getError(name.value)\n  } else {\n    return null\n  }\n})\n\nconst inputWarning = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getWarning(name.value)\n  } else {\n    return null\n  }\n})\n\nconst inputTouched = computed({\n  get () {\n    return store.getters.getTouched(name.value);\n  },\n  set (value) {\n    store.commit('setTouched', {\n      value: value,\n      name: name.value\n    });\n  }\n});\n\nconst inputValue = computed({\n  get () {\n    return store.getters.getValue(name.value);\n  },\n  set (value) {\n    store.dispatch('update', {\n      value: value,\n      name: name.value\n    })\n  }\n});\n\nwatch(suggestedValue, (value, _oldValue) => {\n  if (useSuggestedValue.value) {\n    inputValue.value = value;\n  }\n});\n</script>\n","<template>\n  <ComponentWrapper :name=\"name\" :classes=\"inputGroupClass\" :id=\"id\">\n    <input v-if=\"readonly\" type=\"hidden\" :name=\"name\" :value=\"inputValue\"/>\n\n    <div v-if=\"prepend\" class=\"input-block__prepend\" :id=\"id + '__prepend'\">\n      <span v-html=\"prepend\"></span>\n    </div>\n\n    <select :id=\"id\"\n            :class=\"[inputClass, prepend ? 'input--has-prepend' : '', append ? 'input--has-append' : '']\"\n            :value=\"inputValue\"\n            @input=\"inputValue=$event.target.value\"\n            @focus=\"inputTouched=true\"\n            :name=\"name\"\n            :disabled=\"readonly\"\n            v-bind=\"$attrs\"\n    >\n      <option v-if=\"includeBlank\" value=\"\">{{ placeholder }}</option>\n      <option\n          v-for=\"(value, key) in choicesToJson\"\n          :value=\"value.id\"\n          :key=\"key\"\n      >\n        {{ value.display_name }}\n      </option>\n    </select>\n\n    <div v-if=\"append\" class=\"input-block__append\" :id=\"id + '__append'\">\n      <span v-html=\"append\"></span>\n    </div>\n\n    <ErrorsPlaceholder v-if='displayError' :names=\"[name]\"></ErrorsPlaceholder>\n  </ComponentWrapper>\n</template>\n\n<script setup>\nimport { computed, toRefs, watch } from 'vue';\nimport { useStore } from 'vuex';\nimport ErrorsPlaceholder from \"./errors_placeholder.vue\";\nimport ComponentWrapper from \"./component_wrapper.vue\";\nconst props = defineProps({\n  append: {\n    type: String,\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  id: {\n    type: String,\n    required: true\n  },\n  prepend: {\n    type: String,\n  },\n  choices: {\n    type: String,\n    required: true\n  },\n  include_blank: {\n    type: String,\n    required: true\n  },\n  readonly: {\n    type: Boolean,\n    required: false,\n    default: false\n  },\n  suggest_value: { // do not use directly (instead use the computed property suggestValue)\n    type: [String, Boolean],\n    required: false,\n    default: false\n  },\n  display_error: { // do not use directly (instead use the computed property displayError)\n    type: [String, Boolean],\n    required: false,\n    default: true\n  }\n});\nconst store = useStore();\nconst { append, name, id, prepend, choices, include_blank, readonly, suggest_value, display_error } = toRefs(props);\nconst choicesToJson = computed(() => {\n  return (\n      store.getters.getPotentialValues(name.value) ||\n      JSON.parse(choices.value)\n  );\n});\nconst displayValidationError = computed(() => {\n  return inputTouched.value && inputError.value;\n});\nconst displayValidationWarning = computed(() => {\n  return inputTouched.value && !inputError.value && inputWarning.value;\n});\nconst suggestValue = computed(() => {\n  return (suggest_value.value === 'true' || suggest_value.value === true || suggest_value.value === 'force');\n});\nconst displayError = computed(() => {\n  return (display_error.value === 'true' || display_error.value === true);\n});\nconst useSuggestedValue = computed(() => {\n  return (suggestValue.value && !inputTouched.value) || suggest_value.value === 'force';\n});\nconst suggestedValue = computed(() => {\n  return store.getters.getSuggestedValues(name.value);\n});\nconst includeBlank = computed(() => {\n  let include_blank_value = include_blank.value;\n  if (include_blank_value === null ||\n      include_blank_value === \"\" ||\n      include_blank_value === false ||\n      include_blank_value === \"false\") {\n    return false;\n  }\n  return true;\n});\nconst placeholder = computed(() => {\n  let include_blank_value = include_blank.value;\n  if (include_blank_value === true || include_blank_value === \"true\") {\n    return \"\";\n  }\n  return include_blank_value;\n});\nconst inputClass = computed(() => {\n  return {\n    \"custom-select\": true,\n    \"input-block__placeholder--selected\": (includeBlank.value && inputValue.value === ''),\n    \"input-block__field--invalid\": (inputTouched.value && inputError.value),\n    \"input-block__field--warning\": (inputTouched.value && !inputError.value && inputWarning.value)\n  };\n});\nconst inputError = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getError(name.value);\n  } else {\n    return null;\n  }\n});\nconst inputWarning = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getWarning(name.value);\n  } else {\n    return null;\n  }\n});\nconst inputGroupClass = computed(() => {\n  return {\n    \"input-block\": true,\n  };\n});\nconst inputTouched = computed({\n  get() {\n    return store.getters.getTouched(name.value);\n  },\n  set(value) {\n    store.commit('setTouched', {\n      value: value,\n      name: name.value\n    });\n  }\n});\nconst inputValue = computed({\n  get() {\n    return (store.getters.getValue(name.value) || '');  // '' forces the Placeholder (aka the option with value='') to be displayed and selected.\n  },\n  set(value) {\n    store.dispatch('update', {\n      value: value,\n      name: name.value\n    });\n  }\n});\nwatch(suggestedValue, (value, _oldValue) => {\n  if (useSuggestedValue.value) {\n    inputValue.value = value;\n  }\n});\n</script>\n","<template>\n  <div class=\"form-validation\">\n    <input v-bind=\"$attrs\" @click=\"submitting\" :disabled=\"disabled\"/>\n\n    <div class=\"form-validation__global-error\"\n         v-if=\"displayValidationWarning\"\n         @click=\"displayValidationMessages = !displayValidationMessages\">!\n    </div>\n\n    <ul class=\"form-validation__tooltip\" v-if=\"displayValidationWarning & displayValidationMessages\">\n      <li v-for=\"error in recapErrors\" :key=\"error\">{{ error }}</li>\n    </ul>\n  </div>\n</template>\n\n\n<script setup>\nimport { computed, ref } from \"vue\";\nimport { useStore } from \"vuex\";\ndefineOptions({\n  inheritAttrs: false,\n})\nconst store = useStore();\nconst displayValidationWarning = computed(() => {\n  return inputTouched.value\n      && !store.getters.getMeta(`hideValidationErrors`)\n      && !store.getters.getError(`${store.getters.getMeta('modelName')}._is_valid`)\n})\nconst inputTouched = computed({\n  get () {\n    return store.getters.getTouched('modelName')\n  },\n  set (value) {\n    store.commit('setTouched', {\n      value: value,\n      name: name.value\n    })\n  }\n});\nconst recapErrors = computed(() => {\n  let recap = store.getters.getError(store.getters.getMeta(\"modelName\"));\n  delete recap._is_valid;\n  return Object.values(recap);\n})\nconst disabled = ref(false)\nconst displayValidationMessages = ref(false)\nconst submitting = () => {\n  if (store.getters.getError(`${store.getters.getMeta('modelName')}._is_valid`)) {\n    setTimeout(() => disabled.value = true);\n  }\n}\n</script>\n","<template>\n  <ComponentWrapper :name=\"name\" :classes=\"inputGroupClass\" :id=\"id\">\n    <div v-if=\"prepend\" class=\"input-block__prepend\" :id=\"id + '__prepend'\">\n      <span v-html=\"prepend\"></span>\n    </div>\n\n    <textarea\n        v-bind=\"$attrs\"\n        :class=\"[inputClass, prepend ? 'input--has-prepend' : '', append ? 'input--has-append' : '']\"\n        :id=\"id\"\n        :value=\"inputValue\"\n        @input=\"inputValue=$event.target.value\"\n        @focus=\"inputTouched=true\"\n        :name=\"name\"\n    />\n\n    <div v-if=\"append\" class=\"input-block__append\" :id=\"id + '__append'\">\n      <span v-html=\"append\"></span>\n    </div>\n\n    <ErrorsPlaceholder v-if='displayError' :names=[name]></ErrorsPlaceholder>\n  </ComponentWrapper>\n</template>\n\n\n<script setup>\nimport { computed, toRefs, watch } from \"vue\";\nimport { useStore } from \"vuex\";\nimport ComponentWrapper from \"./component_wrapper.vue\";\nimport ErrorsPlaceholder from \"./errors_placeholder.vue\";\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst props = defineProps({\n  append: {\n    type: String,\n  },\n  id: {\n    type: String,\n    required: true\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  prepend: {\n    type: String,\n  },\n  suggest_value: { // do not use directly (instead use the computed property suggestValue)\n    type: [String, Boolean],\n    required: false,\n    default: false\n  },\n  display_error: { // do not use directly (instead use the computed property displayError)\n    type: [String, Boolean],\n    required: false,\n    default: true\n  }\n})\n\nconst store = useStore();\nconst { append, name, id, prepend, suggest_value, display_error } = toRefs(props)\n\nconst displayValidationError = computed(() => {\n  return inputTouched.value && inputError.value;\n})\n\nconst displayValidationWarning = computed(() => {\n  return inputTouched.value && !inputError.value && inputWarning.value\n})\n\nconst suggestValue = computed(() => {\n  return (suggest_value.value === 'true' || suggest_value.value === true || suggest_value.value === 'force')\n})\n\nconst displayError = computed(() => {\n  return (display_error.value === 'true' || display_error.value === true)\n})\n\nconst useSuggestedValue = computed(() => {\n  return (suggestValue.value && !inputTouched.value) || suggest_value.value === 'force'\n})\n\nconst suggestedValue = computed(() => {\n  return store.getters.getSuggestedValues(name.value)\n})\n\nconst inputClass = computed(() => {\n  return {\n    \"input-block__field\": true,\n    \"input-block__field--invalid\": (inputTouched.value && inputError.value),\n    \"input-block__field--warning\": (inputTouched.value && !inputError.value && inputWarning.value)\n  }\n})\n\nconst inputError = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getError(name.value)\n  } else {\n    return null\n  }\n})\n\nconst inputWarning = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getWarning(name.value)\n  } else {\n    return null\n  }\n})\n\nconst inputGroupClass = computed(() => {\n  return {\n    \"input-block\": true,\n  }\n})\n\nconst inputTouched = computed({\n  get () {\n    return store.getters.getTouched(name.value);\n  },\n  set (value) {\n    store.commit('setTouched', {\n      value: value,\n      name: name.value\n    });\n  }\n});\n\nconst inputValue = computed({\n  get () {\n    return store.getters.getValue(name.value);\n  },\n  set (value) {\n    store.dispatch('update', {\n      value: value,\n      name: name.value\n    });\n  }\n});\n\n\nwatch(suggestedValue, (value, _oldValue) => {\n  if (useSuggestedValue.value) {\n    inputValue.value = value;\n  }\n});\n</script>\n","<template>\n  <label :for=\"for\">\n    <slot></slot>\n  </label>\n</template>\n\n<script>\nexport default {\n  inheritAttrs: false,\n  props: {\n    for: {\n      type: String,\n      required: true\n    }\n  },\n}\n</script>\n","<template>\n  <ComponentWrapper :name=\"name\" :classes=\"inputGroupClass\" :id=\"id\">\n\n    <label :class=\"inputClass\" :for='id'>\n      <span class=\"toggle-label-prepend\" v-if=\"showLabels\">{{ off_label }}</span>\n      <input type=\"hidden\" :name=\"name\" :value=\"off_value\"/>\n\n      <input :id=\"id\"\n             :name=\"name\"\n             class=\"toggle_switch_component__input\"\n             type='checkbox'\n             ref=\"input\"\n             v-bind=\"$attrs\"\n             :disabled=\"disabled\"\n             :checked=\"inputValue === on_value\"\n             @focus=\"inputTouched=true\"\n             @keydown.space.prevent=\"toggleInputValue\"\n             @click=\"toggleInputValue\"\n             :value=\"on_value\"\n      />\n\n      <span class=\"toggle_switch_component__display\" hidden></span>\n      <span class=\"toggle-label-append\" v-if=\"showLabels\">{{ on_label }}</span>\n      <p v-if=\"!showLabels\">{{ inputLabel }}</p>\n    </label>\n\n    <ErrorsPlaceholder v-if='displayError' :names=[name]></ErrorsPlaceholder>\n  </ComponentWrapper>\n</template>\n\n\n<script setup>\nimport { computed, toRefs, watch } from \"vue\";\nimport { useStore } from \"vuex\";\n\nimport ErrorsPlaceholder from \"./errors_placeholder.vue\";\nimport ComponentWrapper from \"./component_wrapper.vue\";\n\nconst props = defineProps({\n  name: {\n    type: String,\n    required: true\n  },\n  id: {\n    type: String,\n    required: true\n  },\n  value: {\n    type: String,\n    required: true\n  },\n  on_value: {\n    type: String,\n    required: true\n  },\n  on_label: {\n    type: String,\n    required: true\n  },\n  off_value: {\n    type: String,\n    required: true\n  },\n  off_label: {\n    type: String,\n    required: true\n  },\n  disabled: {\n    type: Boolean,\n    required: false\n  },\n  suggest_value: { // do not use directly (instead use the computed property suggestValue)\n    type: [String, Boolean],\n    required: false,\n    default: false\n  },\n  display_error: { // do not use directly (instead use the computed property displayError)\n    type: [String, Boolean],\n    required: false,\n    default: true\n  },\n  show_labels: {\n    type: [String, Boolean],\n    default: false\n  }\n})\n\nconst store = useStore();\nconst {\n  name,\n  id,\n  value,\n  on_value,\n  on_label,\n  off_value,\n  off_label,\n  disabled,\n  suggest_value,\n  display_error,\n  show_labels\n} = toRefs(props);\n\nconst toggleInputValue = () => {\n  if (inputValue.value === on_value.value) {\n    inputValue.value = off_value.value;\n  } else {\n    inputValue.value = on_value.value;\n  }\n}\n\nconst displayValidationError = computed(() => {\n  return inputTouched.value && inputError.value;\n})\n\nconst displayValidationWarning = computed(() => {\n  return inputTouched.value && !inputError.value && inputWarning.value;\n})\n\nconst showLabels = computed(() => {\n  return (show_labels.value === 'true' || show_labels.value === true)\n})\n\nconst suggestValue = computed(() => {\n  return (suggest_value.value === 'true' || suggest_value.value === true || suggest_value.value === 'force');\n})\n\nconst displayError = computed(() => {\n  return (display_error.value === 'true' || display_error.value === true)\n})\n\nconst useSuggestedValue = computed(() => {\n  return (suggestValue.value && !inputTouched.value) || suggest_value.value === 'force'\n})\n\nconst suggestedValue = computed(() => {\n  return store.getters.getSuggestedValues(name.value)\n})\n\nconst inputClass = computed(() => {\n  return {\n    \"toggle_switch_component__label\": true,\n    \"input-block__field--invalid\": (inputTouched.value && inputError.value),\n    \"input-block__field--warning\": (inputTouched.value && !inputError.value && inputWarning.value)\n  }\n})\n\nconst inputGroupClass = computed(() => {\n  return {\n    \"toggle_switch_component__global-container\": true,\n  }\n})\n\nconst inputValue = computed({\n  get () {\n    let value = store.getters.getValue(name.value)\n    if (value === true || value === on_value.value) {\n      return on_value.value;\n    } else {\n      return off_value.value;\n    }\n  },\n  set (value) {\n    store.dispatch('update', {\n      value: (value === true || value === on_value.value) ? on_value.value : off_value.value,\n      name: name.value\n    })\n  }\n});\n\nconst inputLabel = computed({\n  get () {\n    let value = store.getters.getValue(name.value)\n    if (value === true || value === on_value.value) {\n      return on_label.value\n    } else {\n      return off_label.value\n    }\n  }\n});\n\nconst inputError = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getError(name.value)\n  } else {\n    return null\n  }\n})\n\nconst inputWarning = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getWarning(name.value)\n  } else {\n    return null\n  }\n})\n\nconst inputTouched = computed({\n  get () {\n    return store.getters.getTouched(name.value)\n  },\n  set (value) {\n    store.commit('setTouched', {\n      value: value,\n      name: name.value\n    });\n  }\n});\n\nwatch(suggestedValue, (value, _oldValue) => {\n  if (useSuggestedValue.value) {\n    inputValue.value = value;\n  }\n});\n</script>\n","<template>\n  <ComponentWrapper :name=\"name\" :classes=\"inputGroupClass\" :id=\"id\">\n\n    <input v-bind=\"$attrs\"\n           :class=\"inputClass\"\n           ref=\"telInput\"\n           type=\"tel\"\n           :id=\"id\"\n           :value=\"inputValue\"\n           @input=\"inputValue=$event.target.value\"\n           @focus=\"inputTouched=true\"\n           :name=\"name\"/>\n\n    <span :id=\"id + '__error_message'\" v-if=\"displayValidationError\" class=\"tel-input__error-feedback\">{{ inputError }}</span>\n    <span :id=\"id + '__warning_message'\" v-if=\"displayValidationWarning\" class=\"input-block__warning-feedback\">{{ inputWarning }}</span>\n\n  </ComponentWrapper>\n</template>\n\n\n<script setup>\nimport { toRefs, computed, ref, onMounted } from \"vue\";\nimport { useStore } from \"vuex\";\nimport 'intl-tel-input/build/css/intlTelInput.css';\nimport intlTelInput from \"intl-tel-input\";\nimport ComponentWrapper from \"./component_wrapper.vue\";\n\ndefineOptions({\n  inheritAttrs: false\n})\n\nconst props = defineProps({\n  name: {\n    type: String,\n    required: true,\n  },\n  id: {\n    type: String,\n    required: true\n  }\n})\nconst telInput = ref(null);\nconst store = useStore();\nconst { name, id } = toRefs(props);\n// Computed methods\nconst displayValidationError = computed(() => {\n  return inputTouched.value && inputError.value;\n})\nconst displayValidationWarning = computed(() => {\n  return inputTouched.value && !inputError.value && inputWarning.value;\n})\nconst inputClass = computed(() => {\n  return {\n    \"input-block__field\": true,\n    \"tel-input__text-input\": true,\n    \"input-block__field--invalid\": (inputTouched.value && inputError.value),\n  }\n})\nconst inputGroupClass = computed(() => {\n  return {\n    \"input-block tel-input-block\": true,\n  }\n})\nconst inputError = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getError(name.value)\n  } else {\n    return null;\n  }\n})\nconst inputWarning = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getWarning(name.value)\n  } else {\n    return null;\n  }\n})\nconst inputTouched = computed({\n  get () {\n    return store.getters.getTouched(name.value);\n  },\n  set (value) {\n    store.commit('setTouched', {\n      value: value,\n      name: name.value\n    });\n  }\n});\nconst inputValue = computed({\n  get () {\n    return store.getters.getValue(name.value);\n  },\n  set (value) {\n    let iti = window.intlTelInputGlobals.getInstance(telInput.value);\n    value = iti.getNumber();\n    store.dispatch('update', {\n      value: value,\n      name: name.value\n    });\n  }\n});\nonMounted(() => {\n  intlTelInput(telInput.value, {\n    preferredCountries: [],\n    formatOnDisplay: false,\n    separateDialCode: false,\n    // fixme: should be the path to intl-tel-input/build/js/utils but I dont know how to get it while using vite js\n    utilsScript: \"https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.21/build/js/utils.js\"\n  });\n})\n</script>\n","<template>\n  <ComponentWrapper :name=\"name\" :classes=\"inputGroupClass\" :id=\"id\">\n\n    <div v-if=\"prepend\" class=\"input-block__prepend\" :id=\"id + '__prepend'\">\n      <span v-html=\"prepend\"></span>\n    </div>\n\n    <input type=\"hidden\" :name=\"name\" :value=\"inputValue\"/>\n\n    <flat-pickr\n        ref=\"input\"\n        v-bind=\"$attrs\"\n        v-model=\"inputFormattedValue\"\n        :id=\"id\"\n        :class=\"[\n            inputClass,\n            prepend ? 'input--has-prepend' : '',\n             append ? 'input--has-append' : '',\n             ]\"\n        :config=\"config\"\n        @on-open=\"onFocusDatePicker\"\n    ></flat-pickr>\n\n    <div v-if=\"append\" class=\"input-block__append\" :id=\"id + '__append'\">\n      <span v-html=\"append\"></span>\n    </div>\n\n    <ErrorsPlaceholder v-if='displayError' :names=[name]></ErrorsPlaceholder>\n  </ComponentWrapper>\n</template>\n\n\n<script>\nimport { debounce } from \"lodash\";\nimport { formatISO, isValid, parse, isMatch } from \"date-fns\";\nimport { format, utcToZonedTime, zonedTimeToUtc } from \"date-fns-tz\";\nimport flatPickr from \"vue-flatpickr-component\";\nimport \"flatpickr/dist/flatpickr.css\";\nimport * as R from 'ramda'\nimport ErrorsPlaceholder from \"./errors_placeholder.vue\";\nimport ComponentWrapper from \"./component_wrapper.vue\";\n\nexport default {\n  data () {\n    return {\n      config: {\n        enableTime: true,\n        noCalendar: true,\n        dateFormat: this.pickerFormat(),\n        allowInput: true,\n        time_24hr: true,\n      },\n      debouncedSetFormattedValue: debounce(this.setFormattedValue, 500),\n    };\n  },\n  components: {\n    ComponentWrapper,\n    ErrorsPlaceholder,\n    flatPickr,\n  },\n  inheritAttrs: false,\n  props: {\n    append: {\n      type: String,\n    },\n    name: {\n      type: String,\n      require: true,\n    },\n    id: {\n      type: String,\n      require: true,\n    },\n    prepend: {\n      type: String,\n    },\n    suggest_value: { // do not use directly (instead use the computed property suggestValue)\n      type: [String, Boolean],\n      require: false,\n      default: false\n    },\n    display_error: { // do not use directly (instead use the computed property displayError)\n      type: [String, Boolean],\n      require: false,\n      default: true\n    },\n    display_format: {\n      type: String,\n      require: false,\n      default: \"HH:mm\",\n    },\n  },\n  computed: {\n    displayValidationError: function () {\n      return this.inputTouched && this.inputError;\n    },\n    displayValidationWarning: function () {\n      return this.inputTouched && !this.inputError && this.inputWarning;\n    },\n    suggestValue: function () {\n      return (this.$props.suggest_value === 'true' || this.$props.suggest_value === true || this.$props.suggest_value === 'force')\n    },\n    displayError: function () {\n      return (this.$props.display_error === 'true' || this.$props.display_error === true)\n    },\n    useSuggestedValue: function () {\n      return (this.suggestValue && !this.inputTouched) || this.$props.suggest_value === 'force'\n    },\n    suggestedValue: function () {\n      return this.$store.getters.getSuggestedValues(this.$props.name);\n    },\n    inputClass: function () {\n      return {\n        \"input-block__field\": true,\n        \"input-block__field--invalid\": (this.inputTouched && this.inputError),\n        \"input-block__field--warning\": (this.inputTouched && !this.inputError && this.inputWarning),\n        datepicker: true,\n      };\n    },\n    inputError: function () {\n      if (this.inputTouched) {\n        return this.$store.getters.getError(this.$props.name);\n      } else {\n        return null;\n      }\n    },\n    inputWarning: function () {\n      if (this.inputTouched) {\n        return this.$store.getters.getWarning(this.$props.name);\n      } else {\n        return null;\n      }\n    },\n    inputGroupClass: function () {\n      return {\n        \"input-block\": true,\n      };\n    },\n    inputTouched: {\n      get () {\n        return this.$store.getters.getTouched(this.$props.name);\n      },\n      set (value) {\n        this.$store.commit(\"setTouched\", {\n          value: value,\n          name: this.$props.name,\n        });\n      },\n    },\n    inputValue: {\n      get () {\n        return this.$store.getters.getValue(this.$props.name);\n      },\n      set (value) {\n        this.$store.dispatch(\"update\", {\n          value: value,\n          name: this.$props.name,\n        });\n      },\n    },\n    inputFormattedValue: {\n      get () {\n        //update\n        let value = this.$store.getters.getValue(this.$props.name)\n        let datetime = value == null ? \"\" : new Date(value);\n\n        if (isValid(datetime)) {\n          return format(\n              utcToZonedTime(datetime, 'UTC'),\n              this.$props.display_format,\n              { timeZone: \"UTC\" }\n          );\n        } else {\n          return \"\";\n        }\n      },\n      set (value) {\n        // user is probably typing a new date, wait for him to finish\n        // and avoid unnecessary updates of the state\n        this.debouncedSetFormattedValue(value)\n      },\n    },\n  },\n  watch: {\n    suggestedValue: function (value, _oldValue) {\n      if (this.useSuggestedValue) {\n        this.inputValue = value;\n      }\n    },\n  },\n  methods: {\n    onFocusDatePicker: function () {\n      this.inputTouched = true;\n    },\n    checkIsValidFormat: (value, display_format) => {\n      return !R.isNil(value) && !R.isEmpty(value) && isMatch(value, display_format)\n    },\n    pickerFormat: function () {\n      let format;\n\n      if (this.$props.display_format === 'HH:mm') {\n        format = 'H:i'\n      }\n\n      return format\n    },\n    setFormattedValue: function (value) {\n      let display_format = this.$props.display_format\n\n      if (!R.isNil(value) && !R.isEmpty(value) && !isMatch(value, display_format)) {\n        // ignore non-blank & unmatched values\n        // user is probably typing a new date, wait for him to finish\n        return\n      }\n\n\n      let time = parse(value, display_format, new Date());\n      let normalised_date = isValid(time) ? formatISO(zonedTimeToUtc(time, 'UTC')) : ''\n\n      this.$store.dispatch(\"update\", {\n        value: normalised_date,\n        name: this.$props.name,\n      });\n    }\n  },\n};\n</script>\n","<template>\n  <ComponentWrapper :name=\"name\" :classes=\"inputGroupClass\" :id=\"id\">\n\n    <div v-for=\"value in choicesToJson\" class=\"multi_check__flex-container\">\n      <div class=\"multi_check__checkbox-container\">\n        <input v-on:focus=\"inputTouched = true\"\n               type=\"checkbox\"\n               :value=\"value.id\"\n               :name=\"inputName\"\n               :id=\"`id-${value.id}`\"\n               @change=\"updateSelection\"\n               :checked=\"inputValue.includes(value.id)\"\n               class=\"multi_check__checkbox-input\">\n      </div>\n      <div class=\"multi_check__label-container\">\n        <label class=\"multi_check__label-text\" :for=\"`id-${value.id}`\">{{ value.display_name }}</label>\n      </div>\n    </div>\n\n    <input type=\"hidden\" :id=\"id\" :name=\"inputName\" value=\"\"/>\n\n    <ErrorsPlaceholder v-if='displayError' :names=[name]></ErrorsPlaceholder>\n  </ComponentWrapper>\n</template>\n\n<script setup>\nimport { computed, toRefs, watch } from 'vue';\nimport { useStore } from 'vuex';\n\nimport ErrorsPlaceholder from \"./errors_placeholder.vue\";\nimport ComponentWrapper from \"./component_wrapper.vue\";\n\nconst props = defineProps({\n  name: {\n    type: String,\n    required: true\n  },\n  id: {\n    type: String,\n    required: true\n  },\n  choices: {\n    type: String,\n    required: true\n  },\n  suggest_value: { // do not use directly (instead use the computed property suggestValue)\n    type: [String, Boolean],\n    required: false,\n    default: false\n  },\n  display_error: { // do not use directly (instead use the computed property displayError)\n    type: [String, Boolean],\n    required: false,\n    default: true\n  },\n});\n\nconst store = useStore();\nconst { name, id, choices, suggest_value, display_error } = toRefs(props);\n\nconst choicesToJson = computed(() => {\n  return store.getters.getPotentialValues(name.value) || JSON.parse(choices.value)\n});\n\nconst displayValidationError = computed(() => {\n  return inputTouched.value && inputError.value;\n});\n\nconst displayValidationWarning = computed(() => {\n  return inputTouched.value && !inputError.value && inputWarning.value;\n});\n\nconst suggestValue = computed(() => {\n  return (suggest_value.value === 'true' || suggest_value.value === true || suggest_value.value === 'force')\n});\n\nconst displayError = computed(() => {\n  return (display_error.value === 'true' || display_error.value === true)\n});\n\nconst useSuggestedValue = computed(() => {\n  return (suggestValue.value && !inputTouched.value) || suggest_value.value === 'force'\n});\n\nconst suggestedValue = computed(() => {\n  return store.getters.getSuggestedValues(name.value);\n});\n\nconst inputError = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getError(name.value);\n  } else {\n    return null;\n  }\n});\n\nconst inputWarning = computed(() => {\n  if (inputTouched.value) {\n    return store.getters.getWarning(name.value);\n  } else {\n    return null;\n  }\n});\n\nconst inputGroupClass = computed(() => {\n  return {\n    \"multi_check__wrapper\": true\n  }\n});\n\nconst inputName = computed(() => {\n  return (name.value + '[]')\n});\n\nconst inputTouched = computed({\n  get () {\n    return store.getters.getTouched(name.value);\n  },\n  set (value) {\n    store.commit('setTouched', {\n      value: value,\n      name: name.value\n    });\n  }\n});\n\nconst inputValue = computed({\n  get () {\n    return store.getters.getValue(name.value);\n  },\n  set (value) {\n    store.dispatch('update', {\n      value: value,\n      name: name.value\n    });\n  }\n});\n\nwatch(suggestedValue, (value, _oldValue) => {\n  if (useSuggestedValue.value) {\n    inputValue.value = value;\n  }\n});\n\nconst updateSelection = (event) => {\n  // important => do not update directly `values`, instead create a new object,\n  // otherwise the vuejs reactivity might not work as expected\n  const values = inputValue.value || []\n\n  const value = event.target.value;\n  const index = values.indexOf(value);\n\n  if (event.target.checked) {\n    if (index === -1) {\n      inputValue.value = [...values, value]\n    }\n  } else {\n    if (index !== -1) {\n      inputValue.value = values.toSpliced(index, 1);\n    }\n  }\n}\n\n</script>\n","<template>\n  <span v-if=\"displaySuggestedValue\" v-bind=\"$attrs\">{{ getSuggestedValue }}</span>\n</template>\n\n\n<script setup>\nimport { computed, toRefs } from \"vue\";\nimport { useStore } from 'vuex';\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst props = defineProps({\n  name: {\n    type: String,\n    required: true\n  },\n})\n\nconst store = useStore();\nconst { name } = toRefs(props)\n\nconst getSuggestedValue = computed(() => store.getters.getSuggestedValues(name.value));\n\nconst displaySuggestedValue = computed(() => getSuggestedValue.value !== null);\n</script>\n","// start here the update\nimport { createApp } from 'vue';\nimport { createStore } from 'vuex';\nimport * as R from 'ramda'\nimport { Api, Utils } from 'k-utils-js'\n\n// Components\nimport Autocomplete from './autocomplete.vue'\nimport CheckBox from './check_box.vue'\nimport Date from './date.vue'\nimport Datetime from './datetime.vue'\nimport Field from './field.vue'\nimport Form from './form.vue'\nimport Hidden from './hidden.vue'\nimport Label from './label.vue'\nimport Select from './select.vue'\nimport Textarea from './textarea.vue'\nimport MonacoEditor from './monaco_editor.vue'\nimport QuillEditor from './quill_editor.vue'\nimport Submit from './submit.vue'\nimport ToggleSwitch from './toggle_switch.vue'\nimport TelInput from './tel_input.vue'\nimport Time from './time.vue'\nimport MultiCheck from './multi_check.vue'\nimport ErrorsPlaceholder from './errors_placeholder.vue'\nimport SuggestedValue from \"./suggested_value.vue\";\n\nclass FormStore  {\n  constructor({\n                additionalComponents = {},\n                authenticityToken,\n                element,\n                globalAuthenticityToken,\n                httpMethod = 'POST',\n                plugins = [],\n                validationUrl,\n                values= {},\n                initialTouch= false,\n                disableValidation = false,\n                hideValidationErrors = false,\n                ...others\n              }) {\n\n    let defaultComponents = {\n      'botyglot-time': Time,\n      'botyglot-autocomplete': Autocomplete,\n      'botyglot-check_box': CheckBox,\n      'botyglot-date': Date,\n      'botyglot-datetime': Datetime,\n      'botyglot-input': Field,\n      'botyglot-form': Form,\n      'botyglot-hidden': Hidden,\n      'botyglot-select': Select,\n      'botyglot-monaco_editor': MonacoEditor,\n      'botyglot-quill_editor': QuillEditor,\n      'botyglot-textarea': Textarea,\n      'botyglot-submit': Submit,\n      'botyglot-label': Label,\n      'botyglot-toggle-switch': ToggleSwitch,\n      'botyglot-tel-input': TelInput,\n      'botyglot-multi-check': MultiCheck,\n      'botyglot-errors-placeholder': ErrorsPlaceholder,\n      'botyglot-suggested-value': SuggestedValue,\n    }\n\n    const modelName = Object.keys(values)[0];\n\n    let { errors, warnings, suggested_values, potential_values, ...model} = values[modelName]\n    let initialState = {\n      values: {\n        [modelName]:  model || {}\n      },\n      errors: {\n        [modelName]: errors || {}\n      },\n      warnings: {\n        [modelName]: warnings || {}\n      },\n      touched: {\n        [modelName]: {\n          _submit: initialTouch\n        },\n      },\n      potentialValues: {\n        [modelName]:  potential_values || {}\n      },\n      suggestedValues: {\n        [modelName]: suggested_values || {}\n      },\n      meta: Object.assign({\n        modelName: modelName,\n        authenticityToken: authenticityToken,\n        globalAuthenticityToken: globalAuthenticityToken,\n        validationUrl: validationUrl,\n        httpMethod: httpMethod,\n        disableValidation: disableValidation,\n        hideValidationErrors: hideValidationErrors,\n      }, others)\n    }\n\n    this.store = createStore({\n      state: initialState,\n      plugins: plugins,\n      getters:{\n        getValue: (state) => (name) => {\n          let path = Utils.dotify(name)\n          return R.path(path.split('.'), state.values )\n        },\n        getError: (state) => (name) => {\n          let path = Utils.dotify(name)\n          if (state.meta.hideValidationErrors) {\n            return null\n          } else {\n            return R.path(path.split('.'), state.errors )\n          }\n        },\n        getWarning: (state) => (name) => {\n          let path = Utils.dotify(name)\n          if (state.meta.hideValidationErrors) {\n            return null\n          } else {\n            return R.path(path.split('.'), state.warnings )\n          }\n        },\n        getTouched: (state) => (name) => {\n          let path = Utils.dotify(name)\n          return (R.path(path.split('.'), state.touched ) || R.path([modelName, '_submit'], state.touched ))\n        },\n        getMeta: (state) => (name) => {\n          let path = Utils.dotify(name)\n          return R.path(path.split('.'), state.meta )\n        },\n        getPotentialValues: (state) => (name) => {\n          let path = Utils.dotify(name)\n          return R.path(path.split('.'), state.potentialValues )\n        },\n        getSuggestedValues: (state) => (name) => {\n          let path = Utils.dotify(name)\n          return R.path(path.split('.'), state.suggestedValues )\n        },\n      },\n      mutations: {\n        setValue: function(state, payload) {\n          let path = Utils.dotify(payload.name)\n          state.values = R.assocPath(path.split('.'), payload.value, state.values )\n        },\n        setTouched: function(state, payload) {\n          let path = Utils.dotify(payload.name)\n          state.touched = R.assocPath(path.split('.'), payload.value, state.touched )\n        },\n        setError: function(state, payload) {\n          let path = Utils.dotify(payload.name)\n          state.errors = R.assocPath(path.split('.'), payload.value, state.errors )\n        },\n        setWarning: function(state, payload) {\n          let path = Utils.dotify(payload.name)\n          state.warnings = R.assocPath(path.split('.'), payload.value, state.warnings )\n        },\n        setPotentialValues: function(state, payload) {\n          let path = Utils.dotify(payload.name)\n          state.potentialValues = R.assocPath(path.split('.'), payload.value, state.potentialValues )\n        },\n        setSuggestedValues: function(state, payload) {\n          let path = Utils.dotify(payload.name)\n          state.suggestedValues = R.assocPath(path.split('.'), payload.value, state.suggestedValues )\n        },\n\n      },\n      actions: {\n\n        // payload should have the following keys\n        // * sid: mandatory, unique name of the call\n        // * url: mandatory, where to send the data\n        // * method: , option, http verb, by default 'post'\n        // * data: mandatory, json data to be sent to the server\n        // * onSuccess: callback, to be executed when the http request was a success (optional)\n        // * onError: callback, to be executed when the http request was a error (optional)\n        genericSendDataToServer: function(context, payload) {\n          let { sid, url, method,  data, onSuccess, onError, ...others} = payload\n\n          let genericOnSuccess = (response) => {\n            let payload = Object.assign(others, {\n              sid: sid,\n              response: response\n            })\n\n            context.dispatch('genericDataReceivedFromServer', payload)\n          };\n\n          let genericOnError = (response) => {\n            console.log('There was a problem with validating the data');\n            console.log(response)\n            //This exclusively to be able to see this in CI console reports (instead of '[object Object]'):\n            console.log(JSON.stringify(response, null, 2))\n          }\n\n          Api.sendRequest({\n            url: url,\n            method: (method || 'post'),\n            data: data,\n            onSuccess: onSuccess || genericOnSuccess,\n            onError: onError || genericOnError,\n            delay: true\n          })\n        },\n\n        genericDataReceivedFromServer: function(context, payload) {\n          // do nothing, intercect the action in plugins in order to execute code\n        },\n\n        sendValuesToServer: function(context) {\n\n          if (!disableValidation) {\n            let onSuccess = response => {\n              context.dispatch('dataReceivedFromServer', response.data)\n            };\n\n            let onError = (response) => {\n              console.log('There was a problem with validating the data');\n              console.log(response)\n              //This exclusively to be able to see this in CI console reports (instead of '[object Object]'):\n              console.log(JSON.stringify(response, null, 2))\n            };\n\n            let data = Object.assign({\n              utf8: '',\n              authenticity_token: context.state.meta.authenticityToken,\n              _method: context.state.meta.httpMethod,\n            }, R.clone(context.state.values) )\n\n            data[modelName]._prevent_save = true\n\n            Api.sendRequest({url: context.state.meta.validationUrl, data, method: context.state.meta.httpMethod, onSuccess, onError, delay: true})\n          } else {\n            console.log('Back-end validation is disabled')\n            return;\n          }\n\n        },\n\n        dataReceivedFromServer: function(context, payload) {\n          let { errors, warnings, potential_values, suggested_values } = payload[modelName]\n          if (errors) {\n            context.commit('setError', {\n              value: errors,\n              name: modelName\n            })\n          }\n\n          if (warnings) {\n            context.commit('setWarning', {\n              value: warnings,\n              name: modelName\n            })\n          }\n\n          if (potential_values) {\n            context.commit('setPotentialValues', {\n              value: potential_values,\n              name: modelName\n            })\n          }\n\n          if (suggested_values) {\n            context.commit('setSuggestedValues', {\n              value: suggested_values,\n              name: modelName\n            })\n          }\n        },\n\n        update: function(context, payload) {\n          context.commit('setValue', payload)\n          context.dispatch('sendValuesToServer')\n        }\n      }\n\n    });\n\n    this.app = createApp({\n      inheritAttrs: false,\n      components: Object.assign(defaultComponents, additionalComponents),\n      props: {},\n    })\n\n    this.app.use(this.store);\n    this.app.mount(element.parentElement);\n  }\n}\n\nexport default FormStore;\n","// Import vue components\nimport * as components from './lib-components/index';\n\n// install function executed by Vue.use()\nfunction install(Vue) {\n  if (install.installed) return;\n  install.installed = true;\n  Object.keys(components).forEach((componentName) => {\n    Vue.component(componentName, components[componentName]);\n  });\n}\n\n// Create module definition for Vue.use()\nconst plugin = {\n  install,\n};\n\n// To auto-install when vue is found\n/* global window global */\nlet GlobalVue = null;\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue;\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue;\n}\nif (GlobalVue) {\n  GlobalVue.use(plugin);\n}\n\n// Default export is library as a whole, registered via Vue.use()\nexport default plugin;\n\n// To allow individual component use, export components\n// each can be registered via Vue.component()\nexport * from './lib-components/index';\n"],"names":["props","__props","store","useStore","names","force","toRefs","computed_names","computed","inputTouched","result","name","touched","value","inputError","error","inputWarning","warning","displayValidationError","displayValidationWarning","displayValidationMessage","inputClass","inputMessage","isEmpty","inputGroupClass","append","choices","include_blank","id","prepend","suggest_value","display_error","choicesToJson","suggestValue","displayError","useSuggestedValue","suggestedValue","inputValue","watch","_oldValue","checked_value","unchecked_value","clear_option","display_format","pickerFormat","format","convertStringToDate","displayFormat","isMatch","parse","setFormattedValue","R","date","isValid","clearDate","onFocusDatePicker","config","ref","debouncedSetFormattedValue","debounce","clearOption","inputFormattedValue","global","factory","module","this","__assign","t","s","i","n","p","getEventTarget","event","path","defaultConfig","confirmDatePlugin","pluginConfig","confirmContainer","confirmButtonCSSClass","fp","_","__","___","e","eventTarget","isTargetLastFocusableElement","dateStr","showCondition","localConfirmContainer","time_zone","getCurrentDateInTimezone","normalised_date","formatISO","zonedTimeToUtc","zeroPad","num","places","zero","year","month","day","hour","minute","second","dateString","utcToZonedTime","ConfirmDatePlugin","tempDate","timer","form","acceptCharset","action","enctype","method","autoSubmit","values","timeout","handleSubmit","ajaxBeforeSend","readonly","MONACO_EDITOR_OPTIONS","onEditorDidMount","editor","count","countdownInteval","includeBlank","include_blank_value","placeholder","recapErrors","recap","disabled","displayValidationMessages","submitting","_sfc_main","_hoisted_1","_createElementBlock","$props","_renderSlot","_ctx","on_value","on_label","off_value","off_label","show_labels","toggleInputValue","showLabels","inputLabel","telInput","onMounted","intlTelInput","ComponentWrapper","ErrorsPlaceholder","flatPickr","datetime","time","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createBlock","_component_ComponentWrapper","$options","_withCtx","_createElementVNode","_createCommentVNode","_createVNode","_component_flat_pickr","_mergeProps","_cache","$event","$data","_component_ErrorsPlaceholder","inputName","updateSelection","index","getSuggestedValue","displaySuggestedValue","FormStore","additionalComponents","authenticityToken","element","globalAuthenticityToken","httpMethod","plugins","validationUrl","initialTouch","disableValidation","hideValidationErrors","others","defaultComponents","Time","Autocomplete","CheckBox","Date","Datetime","Field","Form","Hidden","Select","MonacoEditor","QuillEditor","Textarea","Submit","Label","ToggleSwitch","TelInput","MultiCheck","SuggestedValue","modelName","errors","warnings","suggested_values","potential_values","model","initialState","createStore","state","Utils","payload","context","sid","url","data","onSuccess","onError","genericOnSuccess","response","genericOnError","Api","createApp","install","Vue","components","componentName","plugin","GlobalVue"],"mappings":"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","x_google_ignoreList":[5]}